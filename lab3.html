<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<head>

<LINK REL=StyleSheet HREF="style.css" TYPE="text/css">
</head>

<div id="container">
	<div id="header">
		<h1>
		ExploitMe Mobile Android Labs
		</h1>
	</div>
	<div id="navigation">
		<ul>
			<li><a href="index.html">Home</a></li>
			<li><a href="setup.html">Setup</a></li>
			<li><a href="lab1.html">Lab1</a></li>
			<li><a href="lab2.html">Lab2</a></li>
			<li><a href="lab3.html">Lab3</a></li>
			<li><a href="lab4.html">Lab4</a></li>
			<li><a href="lab5.html">Lab5</a></li>
			<li><a href="lab6.html">Lab6</a></li>
		</ul>
	</div>
	<div id="content">
		<h2>
		LAB 3 Insecure file storage
		</h2>
		<p>
		Mobile apps today do a lot of crazy things.  Often, it is a necessity for a developer to store files on the device itself, but there are numerous issues that may arise from doing this.
		</p><p>
		One example, is storage on an SD card.  Typically, if we look at a mobile application, its file systems are sandboxed into certain directories preventing other applicaitons that may be malicious from accessing another apps sensitive data.
		</p><p>
		However, storage on an SD card raises various issues on Android since the card is removable.  If the card is placed in another system that doesn't obey the file permission rules, the files would be openly accessible.  This makes it important to understand why developers should consider where to store their files and whether the files should have added protection.    
		</p><p>
		In this lab, we'll see how Android file permissions are assigned when files are stored on an SD card.
		</p><p>
		Load the base.apk, and open the application.
		</p><p>
		<img src="img/5_mainscreen.png" width="385" height="399" alt="" border="0">
		</p><p>
		Open the "Statement" menu, and load a statement from the list.  If none exist, then first create a transfer between accounts and a statement will automatically be generated.
		</p><p>
		You'll notice that these statements are also available offline.
		</p><p>   
		Let's go into the SDCARD directory.  SD cards are mounted at /mnt/sdcard for the emulator (this may differ on a real device).
		</p><p>
		Also, you'll notice that within the application, statemnets are created in what seems like a webview or HTML file.  We can find this HTML file on the SDCARD which can be accessed by going to
		</p><p>
		/mnt/sdcard/
		</p><p>
		the file will be named by number date and opening it will show you the insecurely stored statement file in HTML format.  anyone with access to the sdcard will be able to gain access to this file.  Also other applications could read from the file.
		<img src="img/3_sdcardperms.png" width="550" height="147" alt="" border="0">
		Take a look at the file permissions:
		</p><p>
		----rwxr-x system   sdcard_rw      160 2011-08-03 16:48 1312361332270.html
		</p><p>
		the file is stored as world readable, allowing any other application to access the file. 
		</p><p>
		<img src="img/3_sdcard_statements.png" width="550" height="147" alt="" border="0">
		</p><p>
		We could also simply just read the HTML file right away, disclosing information about the user's bank account and statements.
		</p><p>
		
		
		<h2>Solution</h2>
		
	</body>
</html>